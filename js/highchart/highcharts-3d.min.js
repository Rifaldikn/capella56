!function(t){"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):t("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){var d,x,y,f,c,e,i,m,M,P,p,u,o,l,r,a,z,b,g,n,s,v,A,h,k,S,L,I,D,F,w,E,T,Z,G,X,W,Y,C,R,V,O,N,H,B,j,_,q,U,J,K,Q,$,tt,et,it,ot,st,rt,at,nt,lt,ht,ct,pt,dt,xt,yt,ft,ut;function zt(t,e,i,o,s,r,a,n){var l=[],h=r-s;return s<r&&r-s>Math.PI/2+1e-4?l=(l=l.concat(zt(t,e,i,o,s,s+Math.PI/2,a,n))).concat(zt(t,e,i,o,s+Math.PI/2,r,a,n)):r<s&&s-r>Math.PI/2+1e-4?l=(l=l.concat(zt(t,e,i,o,s,s-Math.PI/2,a,n))).concat(zt(t,e,i,o,s-Math.PI/2,r,a,n)):["C",t+i*Math.cos(s)-i*c*h*Math.sin(s)+a,e+o*Math.sin(s)+o*c*h*Math.cos(s)+n,t+i*Math.cos(r)+i*c*h*Math.sin(r)+a,e+o*Math.sin(r)-o*c*h*Math.cos(r)+n,t+i*Math.cos(r)+a,e+o*Math.sin(r)+n]}function bt(t,e,i){if(!t.chart.is3d()||"colorAxis"===t.coll)return e;var o=t.chart,s=G*o.options.chart.options3d.alpha,r=G*o.options.chart.options3d.beta,a=R(i&&t.options.title.position3d,t.options.labels.position3d);i=R(i&&t.options.title.skew3d,t.options.labels.skew3d);var n=o.frame3d,l=o.plotLeft,h=o.plotWidth+l,c=o.plotTop,p=o.plotHeight+c,d=(o=!1,0),x=0,y={x:0,y:1,z:0};if(e=t.swapZ({x:e.x,y:e.y,z:0}),t.isZAxis)if(t.opposite){if(null===n.axes.z.top)return{};x=e.y-c,e.x=n.axes.z.top.x,e.y=n.axes.z.top.y,l=n.axes.z.top.xDir,o=!n.top.frontFacing}else{if(null===n.axes.z.bottom)return{};x=e.y-p,e.x=n.axes.z.bottom.x,e.y=n.axes.z.bottom.y,l=n.axes.z.bottom.xDir,o=!n.bottom.frontFacing}else if(t.horiz)if(t.opposite){if(null===n.axes.x.top)return{};x=e.y-c,e.y=n.axes.x.top.y,e.z=n.axes.x.top.z,l=n.axes.x.top.xDir,o=!n.top.frontFacing}else{if(null===n.axes.x.bottom)return{};x=e.y-p,e.y=n.axes.x.bottom.y,e.z=n.axes.x.bottom.z,l=n.axes.x.bottom.xDir,o=!n.bottom.frontFacing}else if(t.opposite){if(null===n.axes.y.right)return{};d=e.x-h,e.x=n.axes.y.right.x,e.z=n.axes.y.right.z,l={x:(l=n.axes.y.right.xDir).z,y:l.y,z:-l.x}}else{if(null===n.axes.y.left)return{};d=e.x-l,e.x=n.axes.y.left.x,e.z=n.axes.y.left.z,l=n.axes.y.left.xDir}return"chart"!==a&&("flap"===a?t.horiz?(r=Math.sin(s),s=Math.cos(s),t.opposite&&(r=-r),o&&(r=-r),y={x:l.z*r,y:s,z:-l.x*r}):l={x:Math.cos(r),y:0,z:Math.sin(r)}:"ortho"===a?t.horiz?(y=Math.cos(s),a=Math.sin(r)*y,s=-Math.sin(s),r=-y*Math.cos(r),y={x:l.y*r-l.z*s,y:l.z*a-l.x*r,z:l.x*s-l.y*a},s=1/Math.sqrt(y.x*y.x+y.y*y.y+y.z*y.z),o&&(s=-s),y={x:s*y.x,y:s*y.y,z:s*y.z}):l={x:Math.cos(r),y:0,z:Math.sin(r)}:t.horiz?y={x:Math.sin(r)*Math.sin(s),y:Math.cos(s),z:-Math.cos(r)*Math.sin(s)}:l={x:Math.cos(r),y:0,z:Math.sin(r)}),e.x+=d*l.x+x*y.x,e.y+=d*l.y+x*y.y,e.z+=d*l.z+x*y.z,o=Y([e],t.chart)[0],i&&(V(Y([e,{x:e.x+l.x,y:e.y+l.y,z:e.z+l.z},{x:e.x+y.x,y:e.y+y.y,z:e.z+y.z}],t.chart))<0&&(l={x:-l.x,y:-l.y,z:-l.z}),t=Y([{x:e.x,y:e.y,z:e.z},{x:e.x+l.x,y:e.y+l.y,z:e.z+l.z},{x:e.x+y.x,y:e.y+y.y,z:e.z+y.z}],t.chart),o.matrix=[t[1].x-t[0].x,t[1].y-t[0].y,t[2].x-t[0].x,t[2].y-t[0].y,o.x,o.y],o.matrix[4]-=o.x*o.matrix[0]+o.y*o.matrix[2],o.matrix[5]-=o.x*o.matrix[1]+o.y*o.matrix[3]),o}function gt(t){var e=t.apply(this,[].slice.call(arguments,1));return this.chart.is3d&&this.chart.is3d()&&(e.stroke=this.options.edgeColor||e.fill,e["stroke-width"]=Q(this.options.edgeWidth,1)),e}x=(d=t).deg2rad,y=d.pick,d.perspective3D=function(t,e,i){return e=0<i&&i<Number.POSITIVE_INFINITY?i/(t.z+e.z+i):1,{x:t.x*e,y:t.y*e}},d.perspective=function(t,e,i){var o=e.options.chart.options3d,s=!!i&&e.inverted,r={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:y(o.depth,1)*y(o.viewDistance,0)},a=e.scale3d||1,n=x*o.beta*(s?-1:1),l=(o=x*o.alpha*(s?-1:1),Math.cos(o)),h=Math.cos(-n),c=Math.sin(o),p=Math.sin(-n);return i||(r.x+=e.plotLeft,r.y+=e.plotTop),t.map(function(t){var e;e=(s?t.y:t.x)-r.x;var i=(s?t.x:t.y)-r.y;return t=(t.z||0)-r.z,e={x:h*e-p*t,y:-c*p*e+l*i-h*c*t,z:l*p*e+c*i+l*h*t},(i=d.perspective3D(e,r,r.vd)).x=i.x*a+r.x,i.y=i.y*a+r.y,i.z=e.z*a+r.z,{x:s?i.y:i.x,y:s?i.x:i.y,z:i.z}})},d.pointCameraDistance=function(t,e){var i=e.options.chart.options3d,o=e.plotWidth/2;return e=e.plotHeight/2,i=y(i.depth,1)*y(i.viewDistance,0)+i.depth,Math.sqrt(Math.pow(o-t.plotX,2)+Math.pow(e-t.plotY,2)+Math.pow(i-t.plotZ,2))},d.shapeArea=function(t){var e,i,o=0;for(e=0;e<t.length;e++)i=(e+1)%t.length,o+=t[e].x*t[i].y-t[i].x*t[e].y;return o/2},d.shapeArea3d=function(t,e,i){return d.shapeArea(d.perspective(t,e,i))},f=t,m=Math.cos,M=Math.PI,P=Math.sin,p=f.animObject,u=f.charts,o=f.color,l=f.defined,r=f.deg2rad,a=f.extend,z=f.merge,b=f.perspective,g=f.pick,n=f.SVGElement,s=f.SVGRenderer,v=f.wrap,c=4*(Math.sqrt(2)-1)/3/(M/2),s.prototype.toLinePath=function(t,e){var i=[];return t.forEach(function(t){i.push("L",t.x,t.y)}),t.length&&(i[0]="M",e&&i.push("Z")),i},s.prototype.toLineSegments=function(t){var e=[],i=!0;return t.forEach(function(t){e.push(i?"M":"L",t.x,t.y),i=!i}),e},s.prototype.face3d=function(t){var s=this,e=this.createElement("path");return e.vertexes=[],e.insidePlotArea=!1,e.enabled=!0,v(e,"attr",function(t,e){if("object"==typeof e&&(l(e.enabled)||l(e.vertexes)||l(e.insidePlotArea))){this.enabled=g(e.enabled,this.enabled),this.vertexes=g(e.vertexes,this.vertexes),this.insidePlotArea=g(e.insidePlotArea,this.insidePlotArea),delete e.enabled,delete e.vertexes,delete e.insidePlotArea;var i=b(this.vertexes,u[s.chartIndex],this.insidePlotArea),o=s.toLinePath(i,!0);i=f.shapeArea(i),i=this.enabled&&0<i?"visible":"hidden",e.d=o,e.visibility=i}return t.apply(this,[].slice.call(arguments,1))}),v(e,"animate",function(t,e){if("object"==typeof e&&(l(e.enabled)||l(e.vertexes)||l(e.insidePlotArea))){this.enabled=g(e.enabled,this.enabled),this.vertexes=g(e.vertexes,this.vertexes),this.insidePlotArea=g(e.insidePlotArea,this.insidePlotArea),delete e.enabled,delete e.vertexes,delete e.insidePlotArea;var i=b(this.vertexes,u[s.chartIndex],this.insidePlotArea),o=s.toLinePath(i,!0);i=f.shapeArea(i),i=this.enabled&&0<i?"visible":"hidden",e.d=o,this.attr("visibility",i)}return t.apply(this,[].slice.call(arguments,1))}),e.attr(t)},s.prototype.polyhedron=function(t){var a=this,n=this.g(),e=n.destroy;return this.styledMode||n.attr({"stroke-linejoin":"round"}),n.faces=[],n.destroy=function(){for(var t=0;t<n.faces.length;t++)n.faces[t].destroy();return e.call(this)},v(n,"attr",function(t,e,i,o,s){if("object"==typeof e&&l(e.faces)){for(;n.faces.length>e.faces.length;)n.faces.pop().destroy();for(;n.faces.length<e.faces.length;)n.faces.push(a.face3d().add(n));for(var r=0;r<e.faces.length;r++)a.styledMode&&delete e.faces[r].fill,n.faces[r].attr(e.faces[r],null,o,s);delete e.faces}return t.apply(this,[].slice.call(arguments,1))}),v(n,"animate",function(t,e,i,o){if(e&&e.faces){for(;n.faces.length>e.faces.length;)n.faces.pop().destroy();for(;n.faces.length<e.faces.length;)n.faces.push(a.face3d().add(n));for(var s=0;s<e.faces.length;s++)n.faces[s].animate(e.faces[s],i,o);delete e.faces}return t.apply(this,[].slice.call(arguments,1))}),n.attr(t)},e={initArgs:function(t){var e=this,i=e.renderer,o=i[e.pathType+"Path"](t),s=o.zIndexes;e.parts.forEach(function(t){e[t]=i.path(o[t]).attr({class:"highcharts-3d-"+t,zIndex:s[t]||0}).add(e)}),e.attr({"stroke-linejoin":"round",zIndex:s.group}),e.originalDestroy=e.destroy,e.destroy=e.destroyParts},singleSetterForParts:function(i,t,o,e,s,r){var a={};e=[null,null,e||"attr",s,r];var n=o&&o.zIndexes;return o?(f.objectEach(o,function(t,e){a[e]={},a[e][i]=t,n&&(a[e].zIndex=o.zIndexes[e]||0)}),e[1]=a):(a[i]=t,e[0]=a),this.processParts.apply(this,e)},processParts:function(e,i,o,s,r){var a=this;return a.parts.forEach(function(t){i&&(e=f.pick(i[t],!1)),!1!==e&&a[t][o](e,s,r)}),a},destroyParts:function(){return this.processParts(null,null,"destroy"),this.originalDestroy.call(this)}},i=f.merge(e,{parts:["front","top","side"],pathType:"cuboid",attr:function(t,e,i,o){if("string"==typeof t&&void 0!==e){var s=t;(t={})[s]=e}return t.shapeArgs||l(t.x)?this.singleSetterForParts("d",null,this.renderer[this.pathType+"Path"](t.shapeArgs||t)):n.prototype.attr.call(this,t,void 0,i,o)},animate:function(t,e,i){return l(t.x)&&l(t.y)?(t=this.renderer[this.pathType+"Path"](t),this.singleSetterForParts("d",null,t,"animate",e,i),this.attr({zIndex:t.zIndexes.group})):t.opacity?this.processParts(t,null,"animate",e,i):n.prototype.animate.call(this,t,e,i),this},fillSetter:function(t){return this.singleSetterForParts("fill",null,{front:t,top:o(t).brighten(.1).get(),side:o(t).brighten(-.1).get()}),this.color=this.fill=t,this},opacitySetter:function(t){return this.singleSetterForParts("opacity",t)}}),s.prototype.elements3d={base:e,cuboid:i},s.prototype.element3d=function(t,e){var i=this.g();return f.extend(i,this.elements3d[t]),i.initArgs(e),i},s.prototype.cuboid=function(t){return this.element3d("cuboid",t)},f.SVGRenderer.prototype.cuboidPath=function(t){function o(t){return x[t]}var e,i,s=t.x,r=t.y,a=t.z,n=t.height,l=t.width,h=t.depth,c=u[this.chartIndex],p=c.options.chart.options3d.alpha,d=0,x=b(x=[{x:s,y:r,z:a},{x:s+l,y:r,z:a},{x:s+l,y:r+n,z:a},{x:s,y:r+n,z:a},{x:s,y:r+n,z:a+h},{x:s+l,y:r+n,z:a+h},{x:s+l,y:r,z:a+h},{x:s,y:r,z:a+h}],c,t.insidePlotArea);return t=(e=(i=function(t,e){var i=[[],-1];return t=t.map(o),e=e.map(o),f.shapeArea(t)<0?i=[t,0]:f.shapeArea(e)<0&&(i=[e,1]),i})([3,2,1,0],[7,6,5,4]))[0],l=e[1],n=(e=i([1,6,7,0],[4,5,2,3]))[0],h=e[1],i=(e=i([1,2,5,6],[0,7,4,3]))[0],1===(e=e[1])?d+=1e4*(1e3-s):e||(d+=1e4*s),d+=10*(!h||0<=p&&p<=180||p<360&&357.5<p?c.plotHeight-r:10+r),1===l?d+=100*a:l||(d+=100*(1e3-a)),{front:this.toLinePath(t,!0),top:this.toLinePath(n,!0),side:this.toLinePath(i,!0),zIndexes:{group:Math.round(d)},isFront:l,isTop:h}},f.SVGRenderer.prototype.arc3d=function(t){function l(t){var e,i=!1,o={};for(e in t=z(t))-1!==s.indexOf(e)&&(o[e]=t[e],delete t[e],i=!0);return!!i&&o}var h=this.g(),e=h.renderer,s="x y r innerR start end".split(" ");return(t=z(t)).alpha=(t.alpha||0)*r,t.beta=(t.beta||0)*r,h.top=e.path(),h.side1=e.path(),h.side2=e.path(),h.inn=e.path(),h.out=e.path(),h.onAdd=function(){var e=h.parentGroup,i=h.attr("class");h.top.add(h),["out","inn","side1","side2"].forEach(function(t){h[t].attr({class:i+" highcharts-3d-side"}).add(e)})},["addClass","removeClass"].forEach(function(i){h[i]=function(){var e=arguments;["top","out","inn","side1","side2"].forEach(function(t){h[t][i].apply(h[t],e)})}}),h.setPaths=function(t){var e=h.renderer.arc3dPath(t),i=100*e.zTop;h.attribs=t,h.top.attr({d:e.top,zIndex:e.zTop}),h.inn.attr({d:e.inn,zIndex:e.zInn}),h.out.attr({d:e.out,zIndex:e.zOut}),h.side1.attr({d:e.side1,zIndex:e.zSide1}),h.side2.attr({d:e.side2,zIndex:e.zSide2}),h.zIndex=i,h.attr({zIndex:i}),t.center&&(h.top.setRadialReference(t.center),delete t.center)},h.setPaths(t),h.fillSetter=function(t){var e=o(t).brighten(-.1).get();return this.fill=t,this.side1.attr({fill:e}),this.side2.attr({fill:e}),this.inn.attr({fill:e}),this.out.attr({fill:e}),this.top.attr({fill:t}),this},["opacity","translateX","translateY","visibility"].forEach(function(t){h[t+"Setter"]=function(e,i){h[i]=e,["out","inn","side1","side2","top"].forEach(function(t){h[t].attr(i,e)})}}),v(h,"attr",function(t,e){var i;return"object"==typeof e&&(i=l(e))&&(a(h.attribs,i),h.setPaths(h.attribs)),t.apply(this,[].slice.call(arguments,1))}),v(h,"animate",function(t,e,i,o){var s,r,a=this.attribs,n="data-"+Math.random().toString(26).substring(2,9);return delete e.center,delete e.z,delete e.depth,delete e.alpha,delete e.beta,(r=p(g(i,this.renderer.globalAnimation))).duration&&(s=l(e),h[n]=0,e[n]=1,h[n+"Setter"]=f.noop,s&&(r.step=function(t,e){function i(t){return a[t]+(g(s[t],a[t])-a[t])*e.pos}e.prop===n&&e.elem.setPaths(z(a,{x:i("x"),y:i("y"),r:i("r"),innerR:i("innerR"),start:i("start"),end:i("end")}))}),i=r),t.call(this,e,i,o)}),h.destroy=function(){this.top.destroy(),this.out.destroy(),this.inn.destroy(),this.side1.destroy(),this.side2.destroy(),n.prototype.destroy.call(this)},h.hide=function(){this.top.hide(),this.out.hide(),this.inn.hide(),this.side1.hide(),this.side2.hide()},h.show=function(t){this.top.show(t),this.out.show(t),this.inn.show(t),this.side1.show(t),this.side2.show(t)},h},s.prototype.arc3dPath=function(t){function e(t){return(t%=2*Math.PI)>Math.PI&&(t=2*Math.PI-t),t}var i=t.x,o=t.y,s=t.start,r=t.end-1e-5,a=t.r,n=t.innerR||0,l=t.depth||0,h=t.alpha,c=t.beta,p=Math.cos(s),d=Math.sin(s);t=Math.cos(r);var x=Math.sin(r),y=a*Math.cos(c),f=(a*=Math.cos(h),n*Math.cos(c)),u=n*Math.cos(h),z=(n=l*Math.sin(c),l*Math.sin(h)),b=(l=(l=(l=(l=(l=["M",i+y*p,o+a*d]).concat(zt(i,o,y,a,s,r,0,0))).concat(["L",i+f*t,o+u*x])).concat(zt(i,o,f,u,r,s,0,0))).concat(["Z"]),0<c?Math.PI/2:0),g=(c=0<h?0:Math.PI/2,r<M-c?r:s<M-c?M-c:r),v=2*M-c;return h=(h=["M",i+y*m(b=-b<s?s:-b<r?-b:s),o+a*P(b)]).concat(zt(i,o,y,a,b,g,0,0)),v<r&&s<v?h=(h=(h=(h=(h=(h=(h=(h=h.concat(["L",i+y*m(g)+n,o+a*P(g)+z])).concat(zt(i,o,y,a,g,v,n,z))).concat(["L",i+y*m(v),o+a*P(v)])).concat(zt(i,o,y,a,v,r,0,0))).concat(["L",i+y*m(r)+n,o+a*P(r)+z])).concat(zt(i,o,y,a,r,v,n,z))).concat(["L",i+y*m(v),o+a*P(v)])).concat(zt(i,o,y,a,v,g,0,0)):M-c<r&&s<M-c&&(h=(h=(h=(h=h.concat(["L",i+y*Math.cos(g)+n,o+a*Math.sin(g)+z])).concat(zt(i,o,y,a,g,r,n,z))).concat(["L",i+y*Math.cos(r),o+a*Math.sin(r)])).concat(zt(i,o,y,a,r,g,0,0))),h=(h=(h=h.concat(["L",i+y*Math.cos(g)+n,o+a*Math.sin(g)+z])).concat(zt(i,o,y,a,g,b,n,z))).concat(["Z"]),c=(c=(c=(c=(c=["M",i+f*p,o+u*d]).concat(zt(i,o,f,u,s,r,0,0))).concat(["L",i+f*Math.cos(r)+n,o+u*Math.sin(r)+z])).concat(zt(i,o,f,u,r,s,n,z))).concat(["Z"]),p=["M",i+y*p,o+a*d,"L",i+y*p+n,o+a*d+z,"L",i+f*p+n,o+u*d+z,"L",i+f*p,o+u*d,"Z"],i=["M",i+y*t,o+a*x,"L",i+y*t+n,o+a*x+z,"L",i+f*t+n,o+u*x+z,"L",i+f*t,o+u*x,"Z"],x=Math.atan2(z,-n),o=Math.abs(r+x),t=Math.abs(s+x),s=Math.abs((s+r)/2+x),o=e(o),t=e(t),s=e(s),s*=1e5,r=1e5*t,o*=1e5,{top:l,zTop:1e5*Math.PI+1,out:h,zOut:Math.max(s,r,o),inn:c,zInn:Math.max(s,r,o),side1:p,zSide1:.99*o,side2:i,zSide2:.99*r}},h=(A=t).addEvent,k=A.Chart,S=A.merge,L=A.perspective,I=A.pick,D=A.wrap,k.prototype.is3d=function(){return this.options.chart.options3d&&this.options.chart.options3d.enabled},k.prototype.propsRequireDirtyBox.push("chart.options3d"),k.prototype.propsRequireUpdateSeries.push("chart.options3d"),h(k,"afterInit",function(){var e=this.options;this.is3d()&&(e.series||[]).forEach(function(t){"scatter"===(t.type||e.chart.type||e.chart.defaultSeriesType)&&(t.type="scatter3d")})}),h(k,"addSeries",function(t){this.is3d()&&"scatter"===t.options.type&&(t.options.type="scatter3d")}),A.wrap(A.Chart.prototype,"isInsidePlot",function(t){return this.is3d()||t.apply(this,[].slice.call(arguments,1))}),S(!0,A.getOptions(),{chart:{options3d:{enabled:!1,alpha:0,beta:0,depth:100,fitToPlot:!0,viewDistance:25,axisLabelPosition:null,frame:{visible:"default",size:1,bottom:{},top:{},left:{},right:{},back:{},front:{}}}}}),h(k,"afterGetContainer",function(){this.styledMode&&(this.renderer.definition({tagName:"style",textContent:".highcharts-3d-top{filter: url(#highcharts-brighter)}\n.highcharts-3d-side{filter: url(#highcharts-darker)}\n"}),[{name:"darker",slope:.6},{name:"brighter",slope:1.4}].forEach(function(t){this.renderer.definition({tagName:"filter",id:"highcharts-"+t.name,children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncR",type:"linear",slope:t.slope},{tagName:"feFuncG",type:"linear",slope:t.slope},{tagName:"feFuncB",type:"linear",slope:t.slope}]}]})},this))}),D(k.prototype,"setClassName",function(t){t.apply(this,[].slice.call(arguments,1)),this.is3d()&&(this.container.className+=" highcharts-3d-chart")}),h(A.Chart,"afterSetChartSize",function(){var t=this.options.chart.options3d;if(this.is3d()){var e=this.inverted,i=this.clipBox,o=this.margin;i[e?"y":"x"]=-(o[3]||0),i[e?"x":"y"]=-(o[0]||0),i[e?"height":"width"]=this.chartWidth+(o[3]||0)+(o[1]||0),i[e?"width":"height"]=this.chartHeight+(o[0]||0)+(o[2]||0),this.scale3d=1,!0===t.fitToPlot&&(this.scale3d=function(t,e){var i,o=t.plotLeft,s=t.plotWidth+o,r=t.plotTop,a=t.plotHeight+r,n=o+t.plotWidth/2,l=r+t.plotHeight/2,h=Number.MAX_VALUE,c=-Number.MAX_VALUE,p=Number.MAX_VALUE,d=-Number.MAX_VALUE,x=1;return i=[{x:o,y:r,z:0},{x:o,y:r,z:e}],[0,1].forEach(function(t){i.push({x:s,y:i[t].y,z:i[t].z})}),[0,1,2,3].forEach(function(t){i.push({x:i[t].x,y:a,z:i[t].z})}),(i=L(i,t,!1)).forEach(function(t){h=Math.min(h,t.x),c=Math.max(c,t.x),p=Math.min(p,t.y),d=Math.max(d,t.y)}),h<o&&(x=Math.min(x,1-Math.abs((o+n)/(h+n))%1)),s<c&&(x=Math.min(x,(s-n)/(c-n))),p<r&&(x=p<0?Math.min(x,(r+l)/(-p+r+l)):Math.min(x,1-(r+l)/(p+l)%1)),a<d&&(x=Math.min(x,Math.abs((a-l)/(d-l)))),x}(this,t.depth)),this.frame3d=this.get3dFrame()}}),h(k,"beforeRedraw",function(){this.is3d()&&(this.isDirtyBox=!0)}),h(k,"beforeRender",function(){this.is3d()&&(this.frame3d=this.get3dFrame())}),D(k.prototype,"renderSeries",function(t){var e=this.series.length;if(this.is3d())for(;e--;)(t=this.series[e]).translate(),t.render();else t.call(this)}),h(k,"afterDrawChartBox",function(){if(this.is3d()){var t=this.renderer,e=this.options.chart.options3d,i=this.get3dFrame(),o=this.plotLeft,s=this.plotLeft+this.plotWidth,r=this.plotTop,a=this.plotTop+this.plotHeight,n=(e=e.depth,o-(i.left.visible?i.left.size:0)),l=s+(i.right.visible?i.right.size:0),h=r-(i.top.visible?i.top.size:0),c=a+(i.bottom.visible?i.bottom.size:0),p=0-(i.front.visible?i.front.size:0),d=e+(i.back.visible?i.back.size:0),x=this.hasRendered?"animate":"attr";this.frame3d=i,this.frameShapes||(this.frameShapes={bottom:t.polyhedron().add(),top:t.polyhedron().add(),left:t.polyhedron().add(),right:t.polyhedron().add(),back:t.polyhedron().add(),front:t.polyhedron().add()}),this.frameShapes.bottom[x]({class:"highcharts-3d-frame highcharts-3d-frame-bottom",zIndex:i.bottom.frontFacing?-1e3:1e3,faces:[{fill:A.color(i.bottom.color).brighten(.1).get(),vertexes:[{x:n,y:c,z:p},{x:l,y:c,z:p},{x:l,y:c,z:d},{x:n,y:c,z:d}],enabled:i.bottom.visible},{fill:A.color(i.bottom.color).brighten(.1).get(),vertexes:[{x:o,y:a,z:e},{x:s,y:a,z:e},{x:s,y:a,z:0},{x:o,y:a,z:0}],enabled:i.bottom.visible},{fill:A.color(i.bottom.color).brighten(-.1).get(),vertexes:[{x:n,y:c,z:p},{x:n,y:c,z:d},{x:o,y:a,z:e},{x:o,y:a,z:0}],enabled:i.bottom.visible&&!i.left.visible},{fill:A.color(i.bottom.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:c,z:p},{x:s,y:a,z:0},{x:s,y:a,z:e}],enabled:i.bottom.visible&&!i.right.visible},{fill:A.color(i.bottom.color).get(),vertexes:[{x:l,y:c,z:p},{x:n,y:c,z:p},{x:o,y:a,z:0},{x:s,y:a,z:0}],enabled:i.bottom.visible&&!i.front.visible},{fill:A.color(i.bottom.color).get(),vertexes:[{x:n,y:c,z:d},{x:l,y:c,z:d},{x:s,y:a,z:e},{x:o,y:a,z:e}],enabled:i.bottom.visible&&!i.back.visible}]}),this.frameShapes.top[x]({class:"highcharts-3d-frame highcharts-3d-frame-top",zIndex:i.top.frontFacing?-1e3:1e3,faces:[{fill:A.color(i.top.color).brighten(.1).get(),vertexes:[{x:n,y:h,z:d},{x:l,y:h,z:d},{x:l,y:h,z:p},{x:n,y:h,z:p}],enabled:i.top.visible},{fill:A.color(i.top.color).brighten(.1).get(),vertexes:[{x:o,y:r,z:0},{x:s,y:r,z:0},{x:s,y:r,z:e},{x:o,y:r,z:e}],enabled:i.top.visible},{fill:A.color(i.top.color).brighten(-.1).get(),vertexes:[{x:n,y:h,z:d},{x:n,y:h,z:p},{x:o,y:r,z:0},{x:o,y:r,z:e}],enabled:i.top.visible&&!i.left.visible},{fill:A.color(i.top.color).brighten(-.1).get(),vertexes:[{x:l,y:h,z:p},{x:l,y:h,z:d},{x:s,y:r,z:e},{x:s,y:r,z:0}],enabled:i.top.visible&&!i.right.visible},{fill:A.color(i.top.color).get(),vertexes:[{x:n,y:h,z:p},{x:l,y:h,z:p},{x:s,y:r,z:0},{x:o,y:r,z:0}],enabled:i.top.visible&&!i.front.visible},{fill:A.color(i.top.color).get(),vertexes:[{x:l,y:h,z:d},{x:n,y:h,z:d},{x:o,y:r,z:e},{x:s,y:r,z:e}],enabled:i.top.visible&&!i.back.visible}]}),this.frameShapes.left[x]({class:"highcharts-3d-frame highcharts-3d-frame-left",zIndex:i.left.frontFacing?-1e3:1e3,faces:[{fill:A.color(i.left.color).brighten(.1).get(),vertexes:[{x:n,y:c,z:p},{x:o,y:a,z:0},{x:o,y:a,z:e},{x:n,y:c,z:d}],enabled:i.left.visible&&!i.bottom.visible},{fill:A.color(i.left.color).brighten(.1).get(),vertexes:[{x:n,y:h,z:d},{x:o,y:r,z:e},{x:o,y:r,z:0},{x:n,y:h,z:p}],enabled:i.left.visible&&!i.top.visible},{fill:A.color(i.left.color).brighten(-.1).get(),vertexes:[{x:n,y:c,z:d},{x:n,y:h,z:d},{x:n,y:h,z:p},{x:n,y:c,z:p}],enabled:i.left.visible},{fill:A.color(i.left.color).brighten(-.1).get(),vertexes:[{x:o,y:r,z:e},{x:o,y:a,z:e},{x:o,y:a,z:0},{x:o,y:r,z:0}],enabled:i.left.visible},{fill:A.color(i.left.color).get(),vertexes:[{x:n,y:c,z:p},{x:n,y:h,z:p},{x:o,y:r,z:0},{x:o,y:a,z:0}],enabled:i.left.visible&&!i.front.visible},{fill:A.color(i.left.color).get(),vertexes:[{x:n,y:h,z:d},{x:n,y:c,z:d},{x:o,y:a,z:e},{x:o,y:r,z:e}],enabled:i.left.visible&&!i.back.visible}]}),this.frameShapes.right[x]({class:"highcharts-3d-frame highcharts-3d-frame-right",zIndex:i.right.frontFacing?-1e3:1e3,faces:[{fill:A.color(i.right.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:d},{x:s,y:a,z:e},{x:s,y:a,z:0},{x:l,y:c,z:p}],enabled:i.right.visible&&!i.bottom.visible},{fill:A.color(i.right.color).brighten(.1).get(),vertexes:[{x:l,y:h,z:p},{x:s,y:r,z:0},{x:s,y:r,z:e},{x:l,y:h,z:d}],enabled:i.right.visible&&!i.top.visible},{fill:A.color(i.right.color).brighten(-.1).get(),vertexes:[{x:s,y:r,z:0},{x:s,y:a,z:0},{x:s,y:a,z:e},{x:s,y:r,z:e}],enabled:i.right.visible},{fill:A.color(i.right.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:p},{x:l,y:h,z:p},{x:l,y:h,z:d},{x:l,y:c,z:d}],enabled:i.right.visible},{fill:A.color(i.right.color).get(),vertexes:[{x:l,y:h,z:p},{x:l,y:c,z:p},{x:s,y:a,z:0},{x:s,y:r,z:0}],enabled:i.right.visible&&!i.front.visible},{fill:A.color(i.right.color).get(),vertexes:[{x:l,y:c,z:d},{x:l,y:h,z:d},{x:s,y:r,z:e},{x:s,y:a,z:e}],enabled:i.right.visible&&!i.back.visible}]}),this.frameShapes.back[x]({class:"highcharts-3d-frame highcharts-3d-frame-back",zIndex:i.back.frontFacing?-1e3:1e3,faces:[{fill:A.color(i.back.color).brighten(.1).get(),vertexes:[{x:l,y:c,z:d},{x:n,y:c,z:d},{x:o,y:a,z:e},{x:s,y:a,z:e}],enabled:i.back.visible&&!i.bottom.visible},{fill:A.color(i.back.color).brighten(.1).get(),vertexes:[{x:n,y:h,z:d},{x:l,y:h,z:d},{x:s,y:r,z:e},{x:o,y:r,z:e}],enabled:i.back.visible&&!i.top.visible},{fill:A.color(i.back.color).brighten(-.1).get(),vertexes:[{x:n,y:c,z:d},{x:n,y:h,z:d},{x:o,y:r,z:e},{x:o,y:a,z:e}],enabled:i.back.visible&&!i.left.visible},{fill:A.color(i.back.color).brighten(-.1).get(),vertexes:[{x:l,y:h,z:d},{x:l,y:c,z:d},{x:s,y:a,z:e},{x:s,y:r,z:e}],enabled:i.back.visible&&!i.right.visible},{fill:A.color(i.back.color).get(),vertexes:[{x:o,y:r,z:e},{x:s,y:r,z:e},{x:s,y:a,z:e},{x:o,y:a,z:e}],enabled:i.back.visible},{fill:A.color(i.back.color).get(),vertexes:[{x:n,y:c,z:d},{x:l,y:c,z:d},{x:l,y:h,z:d},{x:n,y:h,z:d}],enabled:i.back.visible}]}),this.frameShapes.front[x]({class:"highcharts-3d-frame highcharts-3d-frame-front",zIndex:i.front.frontFacing?-1e3:1e3,faces:[{fill:A.color(i.front.color).brighten(.1).get(),vertexes:[{x:n,y:c,z:p},{x:l,y:c,z:p},{x:s,y:a,z:0},{x:o,y:a,z:0}],enabled:i.front.visible&&!i.bottom.visible},{fill:A.color(i.front.color).brighten(.1).get(),vertexes:[{x:l,y:h,z:p},{x:n,y:h,z:p},{x:o,y:r,z:0},{x:s,y:r,z:0}],enabled:i.front.visible&&!i.top.visible},{fill:A.color(i.front.color).brighten(-.1).get(),vertexes:[{x:n,y:h,z:p},{x:n,y:c,z:p},{x:o,y:a,z:0},{x:o,y:r,z:0}],enabled:i.front.visible&&!i.left.visible},{fill:A.color(i.front.color).brighten(-.1).get(),vertexes:[{x:l,y:c,z:p},{x:l,y:h,z:p},{x:s,y:r,z:0},{x:s,y:a,z:0}],enabled:i.front.visible&&!i.right.visible},{fill:A.color(i.front.color).get(),vertexes:[{x:s,y:r,z:0},{x:o,y:r,z:0},{x:o,y:a,z:0},{x:s,y:a,z:0}],enabled:i.front.visible},{fill:A.color(i.front.color).get(),vertexes:[{x:l,y:c,z:p},{x:n,y:c,z:p},{x:n,y:h,z:p},{x:l,y:h,z:p}],enabled:i.front.visible}]})}}),k.prototype.retrieveStacks=function(e){var i,o=this.series,s={},r=1;return this.series.forEach(function(t){i=I(t.options.stack,e?0:o.length-1-t.index),s[i]?s[i].series.push(t):(s[i]={series:[t],position:r},r++)}),s.totalStacks=r+1,s},k.prototype.get3dFrame=function(){var a=this,t=a.options.chart.options3d,e=t.frame,i=a.plotLeft,o=a.plotLeft+a.plotWidth,s=a.plotTop,r=a.plotTop+a.plotHeight,n=t.depth,l=(x=function(t){return.5<(t=A.shapeArea3d(t,a))?1:t<-.5?-1:0})([{x:i,y:r,z:n},{x:o,y:r,z:n},{x:o,y:r,z:0},{x:i,y:r,z:0}]),h=x([{x:i,y:s,z:0},{x:o,y:s,z:0},{x:o,y:s,z:n},{x:i,y:s,z:n}]),c=x([{x:i,y:s,z:0},{x:i,y:s,z:n},{x:i,y:r,z:n},{x:i,y:r,z:0}]),p=x([{x:o,y:s,z:n},{x:o,y:s,z:0},{x:o,y:r,z:0},{x:o,y:r,z:n}]),d=x([{x:i,y:r,z:0},{x:o,y:r,z:0},{x:o,y:s,z:0},{x:i,y:s,z:0}]),x=x([{x:i,y:s,z:n},{x:o,y:s,z:n},{x:o,y:r,z:n},{x:i,y:r,z:n}]),y=!1,f=!1,u=!1,z=!1;function b(t,e,i){for(var o=["size","color","visible"],s={},r=0;r<o.length;r++)for(var a=o[r],n=0;n<t.length;n++)if("object"==typeof t[n]){var l=t[n][a];if(null!=l){s[a]=l;break}}return t=i,!0===s.visible||!1===s.visible?t=s.visible:"auto"===s.visible&&(t=0<e),{size:I(s.size,1),color:I(s.color,"none"),frontFacing:0<e,visible:t}}return[].concat(a.xAxis,a.yAxis,a.zAxis).forEach(function(t){t&&(t.horiz?t.opposite?f=!0:y=!0:t.opposite?z=!0:u=!0)}),e={bottom:b([e.bottom,e.top,e],l,y),top:b([e.top,e.bottom,e],h,f),left:b([e.left,e.right,e.side,e],c,u),right:b([e.right,e.left,e.side,e],p,z),back:b([e.back,e.front,e],x,!0),front:b([e.front,e.back,e],d,!1)},"auto"===t.axisLabelPosition?(t=[],(p=function(t,e){return t.visible!==e.visible||t.visible&&e.visible&&t.frontFacing!==e.frontFacing})(e.left,e.front)&&t.push({y:(s+r)/2,x:i,z:0,xDir:{x:1,y:0,z:0}}),p(e.left,e.back)&&t.push({y:(s+r)/2,x:i,z:n,xDir:{x:0,y:0,z:-1}}),p(e.right,e.front)&&t.push({y:(s+r)/2,x:o,z:0,xDir:{x:0,y:0,z:1}}),p(e.right,e.back)&&t.push({y:(s+r)/2,x:o,z:n,xDir:{x:-1,y:0,z:0}}),l=[],p(e.bottom,e.front)&&l.push({x:(i+o)/2,y:r,z:0,xDir:{x:1,y:0,z:0}}),p(e.bottom,e.back)&&l.push({x:(i+o)/2,y:r,z:n,xDir:{x:-1,y:0,z:0}}),h=[],p(e.top,e.front)&&h.push({x:(i+o)/2,y:s,z:0,xDir:{x:1,y:0,z:0}}),p(e.top,e.back)&&h.push({x:(i+o)/2,y:s,z:n,xDir:{x:-1,y:0,z:0}}),c=[],p(e.bottom,e.left)&&c.push({z:(0+n)/2,y:r,x:i,xDir:{x:0,y:0,z:-1}}),p(e.bottom,e.right)&&c.push({z:(0+n)/2,y:r,x:o,xDir:{x:0,y:0,z:1}}),r=[],p(e.top,e.left)&&r.push({z:(0+n)/2,y:s,x:i,xDir:{x:0,y:0,z:-1}}),p(e.top,e.right)&&r.push({z:(0+n)/2,y:s,x:o,xDir:{x:0,y:0,z:1}}),i=function(t,e,i){if(0===t.length)return null;if(1===t.length)return t[0];for(var o=0,s=L(t,a,!1),r=1;r<s.length;r++)i*s[r][e]>i*s[o][e]?o=r:i*s[r][e]==i*s[o][e]&&s[r].z<s[o].z&&(o=r);return t[o]},e.axes={y:{left:i(t,"x",-1),right:i(t,"x",1)},x:{top:i(h,"y",-1),bottom:i(l,"y",1)},z:{top:i(r,"y",-1),bottom:i(c,"y",1)}}):e.axes={y:{left:{x:i,z:0,xDir:{x:1,y:0,z:0}},right:{x:o,z:0,xDir:{x:0,y:0,z:1}}},x:{top:{y:s,z:0,xDir:{x:1,y:0,z:0}},bottom:{y:r,z:0,xDir:{x:1,y:0,z:0}}},z:{top:{x:u?o:i,y:s,xDir:u?{x:0,y:0,z:1}:{x:0,y:0,z:-1}},bottom:{x:u?o:i,y:r,xDir:u?{x:0,y:0,z:1}:{x:0,y:0,z:-1}}}},e},A.Fx.prototype.matrixSetter=function(){var t;if(this.pos<1&&(A.isArray(this.start)||A.isArray(this.end))){var e=this.start||[1,0,0,1,0,0],i=this.end||[1,0,0,1,0,0];t=[];for(var o=0;o<6;o++)t.push(this.pos*i[o]+(1-this.pos)*e[o])}else t=this.end;this.elem.attr(this.prop,t,null,!0)},E=(F=t).addEvent,T=F.Axis,Z=F.Chart,G=F.deg2rad,X=F.extend,W=F.merge,Y=F.perspective,C=F.perspective3D,R=F.pick,V=F.shapeArea,O=F.splat,N=F.Tick,H=F.wrap,W(!0,T.prototype.defaultOptions,{labels:{position3d:"offset",skew3d:!1},title:{position3d:null,skew3d:null}}),E(T,"afterSetOptions",function(){var t;this.chart.is3d&&this.chart.is3d()&&"colorAxis"!==this.coll&&((t=this.options).tickWidth=R(t.tickWidth,0),t.gridLineWidth=R(t.gridLineWidth,1))}),H(T.prototype,"getPlotLinePath",function(t){var e=t.apply(this,[].slice.call(arguments,1));if(!this.chart.is3d()||"colorAxis"===this.coll||null===e)return e;var i=(o=this.chart).options.chart.options3d,o=(i=this.isZAxis?o.plotWidth:i.depth,o.frame3d);return e=[this.swapZ({x:e[1],y:e[2],z:0}),this.swapZ({x:e[1],y:e[2],z:i}),this.swapZ({x:e[4],y:e[5],z:0}),this.swapZ({x:e[4],y:e[5],z:i})],i=[],this.horiz?(this.isZAxis?(o.left.visible&&i.push(e[0],e[2]),o.right.visible&&i.push(e[1],e[3])):(o.front.visible&&i.push(e[0],e[2]),o.back.visible&&i.push(e[1],e[3])),o.top.visible&&i.push(e[0],e[1]),o.bottom.visible&&i.push(e[2],e[3])):(o.front.visible&&i.push(e[0],e[2]),o.back.visible&&i.push(e[1],e[3]),o.left.visible&&i.push(e[0],e[1]),o.right.visible&&i.push(e[2],e[3])),i=Y(i,this.chart,!1),this.chart.renderer.toLineSegments(i)}),H(T.prototype,"getLinePath",function(t){return this.chart.is3d()&&"colorAxis"!==this.coll?[]:t.apply(this,[].slice.call(arguments,1))}),H(T.prototype,"getPlotBandPath",function(t){if(!this.chart.is3d()||"colorAxis"===this.coll)return t.apply(this,[].slice.call(arguments,1));var e=(o=arguments)[2],i=[],o=this.getPlotLinePath(o[1]);if(e=this.getPlotLinePath(e),o&&e)for(var s=0;s<o.length;s+=6)i.push("M",o[s+1],o[s+2],"L",o[s+4],o[s+5],"L",e[s+4],e[s+5],"L",e[s+1],e[s+2],"Z");return i}),H(N.prototype,"getMarkPath",function(t){var e=t.apply(this,[].slice.call(arguments,1));return e=[bt(this.axis,{x:e[1],y:e[2],z:0}),bt(this.axis,{x:e[4],y:e[5],z:0})],this.axis.chart.renderer.toLineSegments(e)}),E(N,"afterGetLabelPosition",function(t){X(t.pos,bt(this.axis,t.pos))}),H(T.prototype,"getTitlePosition",function(t){return bt(this,t.apply(this,[].slice.call(arguments,1)),!0)}),E(T,"drawCrosshair",function(t){this.chart.is3d()&&"colorAxis"!==this.coll&&t.point&&(t.point.crosshairPos=this.isXAxis?t.point.axisXpos:this.len-t.point.axisYpos)}),E(T,"destroy",function(){["backFrame","bottomFrame","sideFrame"].forEach(function(t){this[t]&&(this[t]=this[t].destroy())},this)}),T.prototype.swapZ=function(t,e){return this.isZAxis?{x:(e=e?0:this.chart.plotLeft)+t.z,y:t.y,z:t.x-e}:t},w=F.ZAxis=function(){this.init.apply(this,arguments)},X(w.prototype,T.prototype),X(w.prototype,{isZAxis:!0,setOptions:function(t){t=W({offset:0,lineWidth:0},t),T.prototype.setOptions.call(this,t),this.coll="zAxis"},setAxisSize:function(){T.prototype.setAxisSize.call(this),this.width=this.len=this.chart.options.chart.options3d.depth,this.right=this.chart.chartWidth-this.width-this.left},getSeriesExtremes:function(){var e=this,i=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.ignoreMinPadding=e.ignoreMaxPadding=null,e.buildStacks&&e.buildStacks(),e.series.forEach(function(t){!t.visible&&i.options.chart.ignoreHiddenSeries||(e.hasVisibleSeries=!0,(t=t.zData).length&&(e.dataMin=Math.min(R(e.dataMin,t[0]),Math.min.apply(null,t)),e.dataMax=Math.max(R(e.dataMax,t[0]),Math.max.apply(null,t))))})}}),E(Z,"afterGetAxes",function(){var i=this,t=(t=this.options).zAxis=O(t.zAxis||{});i.is3d()&&(this.zAxis=[],t.forEach(function(t,e){t.index=e,t.isX=!0,new w(i,t).setScale()}))}),H(T.prototype,"getSlotWidth",function(t,e){if(this.chart.is3d()&&e&&e.label&&this.categories&&this.chart.frameShapes){var i,o,s=this.chart,r=this.ticks,a=this.gridGroup.element.childNodes[0].getBBox(),n=s.frameShapes.left.getBBox(),l=s.options.chart.options3d,h=(s={x:s.plotWidth/2,y:s.plotHeight/2,z:l.depth/2,vd:R(l.depth,1)*R(l.viewDistance,0)},r[(l=e.pos)-1]);return r=r[l+1],0!==l&&h&&h.label.xy&&(i=C({x:h.label.xy.x,y:h.label.xy.y,z:null},s,s.vd)),r&&r.label.xy&&(o=C({x:r.label.xy.x,y:r.label.xy.y,z:null},s,s.vd)),r={x:e.label.xy.x,y:e.label.xy.y,z:null},r=C(r,s,s.vd),Math.abs(i?r.x-i.x:o?o.x-r.x:a.x-n.x)}return t.apply(this,[].slice.call(arguments,1))}),j=(B=t).addEvent,_=B.perspective,q=B.pick,j(B.Series,"afterTranslate",function(){this.chart.is3d()&&this.translate3dPoints()}),B.Series.prototype.translate3dPoints=function(){var t,e,i,o=this.chart,s=q(this.zAxis,o.options.zAxis[0]),r=[];for(i=0;i<this.data.length;i++)t=this.data[i],s&&s.translate?(e=s.isLog&&s.val2lin?s.val2lin(t.z):t.z,t.plotZ=s.translate(e),t.isInside=!!t.isInside&&e>=s.min&&e<=s.max):t.plotZ=0,t.axisXpos=t.plotX,t.axisYpos=t.plotY,t.axisZpos=t.plotZ,r.push({x:t.plotX,y:t.plotY,z:t.plotZ});for(o=_(r,o,!0),i=0;i<this.data.length;i++)t=this.data[i],s=o[i],t.plotX=s.x,t.plotY=s.y,t.plotZ=s.z},J=(U=t).addEvent,K=U.perspective,Q=U.pick,$=U.Series,tt=U.seriesTypes,et=U.svg,(it=U.wrap)(tt.column.prototype,"translate",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.translate3dShapes()}),it(U.Series.prototype,"alignDataLabel",function(t){arguments[3].outside3dPlot=arguments[1].outside3dPlot,t.apply(this,[].slice.call(arguments,1))}),it(U.Series.prototype,"justifyDataLabel",function(t){return!arguments[2].outside3dPlot&&t.apply(this,[].slice.call(arguments,1))}),tt.column.prototype.translate3dPoints=function(){},tt.column.prototype.translate3dShapes=function(){var r=this,e=r.chart,t=r.options,a=t.depth||25,n=(t.stacking?t.stack||0:r.index)*(a+(t.groupZPadding||1)),l=r.borderWidth%2?.5:0;e.inverted&&!r.yAxis.reversed&&(l*=-1),!1!==t.grouping&&(n=0),n+=t.groupZPadding||1,r.data.forEach(function(i){if((i.outside3dPlot=null)!==i.y){var o,s=i.shapeArgs,t=i.tooltipPos;[["x","width"],["y","height"]].forEach(function(t){if((o=s[t[0]]-l)<0&&(s[t[1]]+=s[t[0]]+l,s[t[0]]=-l,o=0),o+s[t[1]]>r[t[0]+"Axis"].len&&0!==s[t[1]]&&(s[t[1]]=r[t[0]+"Axis"].len-s[t[0]]),0!==s[t[1]]&&(s[t[0]]>=r[t[0]+"Axis"].len||s[t[0]]+s[t[1]]<=l)){for(var e in s)s[e]=0;i.outside3dPlot=!0}}),"rect"===i.shapeType&&(i.shapeType="cuboid"),s.z=n,s.depth=a,s.insidePlotArea=!0,t=K([{x:t[0],y:t[1],z:n}],e,!0)[0],i.tooltipPos=[t.x,t.y]}}),r.z=n},it(tt.column.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],i=this.yAxis,o=this,s=this.yAxis.reversed;et&&(e?o.data.forEach(function(t){null!==t.y&&(t.height=t.shapeArgs.height,t.shapey=t.shapeArgs.y,t.shapeArgs.height=1,s||(t.shapeArgs.y=t.stackY?t.plotY+i.translate(t.stackY):t.plotY+(t.negative?-t.height:t.height)))}):(o.data.forEach(function(t){null!==t.y&&(t.shapeArgs.height=t.height,t.shapeArgs.y=t.shapey,t.graphic&&t.graphic.animate(t.shapeArgs,o.options.animation))}),this.drawDataLabels(),o.animate=null))}else t.apply(this,[].slice.call(arguments,1))}),it(tt.column.prototype,"plotGroup",function(t,e,i,o,s,r){return this.chart.is3d()&&r&&!this[e]&&(this.chart.columnGroup||(this.chart.columnGroup=this.chart.renderer.g("columnGroup").add(r)),this[e]=this.chart.columnGroup,this.chart.columnGroup.attr(this.getPlotBox()),this[e].survive=!0),t.apply(this,Array.prototype.slice.call(arguments,1))}),it(tt.column.prototype,"setVisible",function(t,e){var i,o=this;o.chart.is3d()&&o.data.forEach(function(t){i=(t.visible=t.options.visible=e=void 0===e?!t.visible:e)?"visible":"hidden",o.options.data[o.data.indexOf(t)]=t.options,t.graphic&&t.graphic.attr({visibility:i})}),t.apply(this,Array.prototype.slice.call(arguments,1))}),tt.column.prototype.handle3dGrouping=!0,J($,"afterInit",function(){if(this.chart.is3d()&&this.handle3dGrouping){var t=this.options,e=t.grouping,i=t.stacking,o=Q(this.yAxis.options.reversedStacks,!0),s=0;if(void 0===e||e){for(e=this.chart.retrieveStacks(i),s=t.stack||0,i=0;i<e[s].series.length&&e[s].series[i]!==this;i++);s=10*(e.totalStacks-e[s].position)+(o?i:-i),this.xAxis.reversed||(s=10*e.totalStacks-s)}t.zIndex=s}}),it(tt.column.prototype,"pointAttribs",gt),tt.columnrange&&(it(tt.columnrange.prototype,"pointAttribs",gt),tt.columnrange.prototype.plotGroup=tt.column.prototype.plotGroup,tt.columnrange.prototype.setVisible=tt.column.prototype.setVisible),it($.prototype,"alignDataLabel",function(t){if(this.chart.is3d()&&this instanceof tt.column){var e=(i=arguments)[4],i=i[1],o={x:e.x,y:e.y,z:this.z};o=K([o],this.chart,!0)[0],e.x=o.x,e.y=i.outside3dPlot?-9e9:o.y}t.apply(this,[].slice.call(arguments,1))}),it(U.StackItem.prototype,"getStackBox",function(t,e){var i=t.apply(this,[].slice.call(arguments,1));if(e.is3d()){var o={x:i.x,y:i.y,z:0};o=U.perspective([o],e,!0)[0],i.x=o.x,i.y=o.y}return i}),st=(ot=t).deg2rad,rt=ot.pick,at=ot.seriesTypes,nt=ot.svg,(ot=ot.wrap)(at.pie.prototype,"translate",function(t){if(t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()){var i=this,o=i.options,s=o.depth||0,e=i.chart.options.chart.options3d,r=e.alpha,a=e.beta,n=(n=o.stacking?(o.stack||0)*s:i._i*s)+s/2;!1!==o.grouping&&(n=0),i.data.forEach(function(t){var e=t.shapeArgs;t.shapeType="arc3d",e.z=n,e.depth=.75*s,e.alpha=r,e.beta=a,e.center=i.center,e=(e.end+e.start)/2,t.slicedTranslation={translateX:Math.round(Math.cos(e)*o.slicedOffset*Math.cos(r*st)),translateY:Math.round(Math.sin(e)*o.slicedOffset*Math.cos(r*st))}})}}),ot(at.pie.prototype.pointClass.prototype,"haloPath",function(t){var e=arguments;return this.series.chart.is3d()?[]:t.call(this,e[1])}),ot(at.pie.prototype,"pointAttribs",function(t,e,i){return t=t.call(this,e,i),i=this.options,this.chart.is3d()&&!this.chart.styledMode&&(t.stroke=i.edgeColor||e.color||this.color,t["stroke-width"]=rt(i.edgeWidth,1)),t}),ot(at.pie.prototype,"drawDataLabels",function(t){if(this.chart.is3d()){var n=this.chart.options.chart.options3d;this.data.forEach(function(t){var e=t.shapeArgs,i=e.r,o=(e.start+e.end)/2,s=(t=t.labelPosition).connectorPosition,r=-i*(1-Math.cos((e.alpha||n.alpha)*st))*Math.sin(o),a=i*(Math.cos((e.beta||n.beta)*st)-1)*Math.cos(o);[t.natural,s.breakAt,s.touchingSliceAt].forEach(function(t){t.x+=a,t.y+=r})})}t.apply(this,[].slice.call(arguments,1))}),ot(at.pie.prototype,"addPoint",function(t){t.apply(this,[].slice.call(arguments,1)),this.chart.is3d()&&this.update(this.userOptions,!0)}),ot(at.pie.prototype,"animate",function(t){if(this.chart.is3d()){var e=arguments[1],i=this.options.animation,o=this.center,s=this.group,r=this.markerGroup;nt&&(!0===i&&(i={}),e?(s.oldtranslateX=s.translateX,s.oldtranslateY=s.translateY,e={translateX:o[0],translateY:o[1],scaleX:.001,scaleY:.001},s.attr(e),r&&(r.attrSetters=s.attrSetters,r.attr(e))):(e={translateX:s.oldtranslateX,translateY:s.oldtranslateY,scaleX:1,scaleY:1},s.animate(e,i),r&&r.animate(e,i),this.animate=null))}else t.apply(this,[].slice.call(arguments,1))}),ht=(lt=t).Point,ct=lt.seriesType,pt=lt.seriesTypes,ct("scatter3d","scatter",{tooltip:{pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>z: <b>{point.z}</b><br/>"}},{pointAttribs:function(t){var e=pt.scatter.prototype.pointAttribs.apply(this,arguments);return this.chart.is3d()&&t&&(e.zIndex=lt.pointCameraDistance(t,this.chart)),e},axisTypes:["xAxis","yAxis","zAxis"],pointArrayMap:["x","y","z"],parallelArrays:["x","y","z"],directTouch:!0},{applyOptions:function(){return ht.prototype.applyOptions.apply(this,arguments),void 0===this.z&&(this.z=0),this}}),xt=(dt=t).addEvent,yt=dt.Axis,ft=dt.SVGRenderer,(ut=dt.VMLRenderer)&&(dt.setOptions({animate:!1}),ut.prototype.face3d=ft.prototype.face3d,ut.prototype.polyhedron=ft.prototype.polyhedron,ut.prototype.elements3d=ft.prototype.elements3d,ut.prototype.element3d=ft.prototype.element3d,ut.prototype.cuboid=ft.prototype.cuboid,ut.prototype.cuboidPath=ft.prototype.cuboidPath,ut.prototype.toLinePath=ft.prototype.toLinePath,ut.prototype.toLineSegments=ft.prototype.toLineSegments,ut.prototype.arc3d=function(t){return(t=ft.prototype.arc3d.call(this,t)).css({zIndex:t.zIndex}),t},dt.VMLRenderer.prototype.arc3dPath=dt.SVGRenderer.prototype.arc3dPath,xt(yt,"render",function(){this.sideFrame&&(this.sideFrame.css({zIndex:0}),this.sideFrame.front.attr({fill:this.sideFrame.color})),this.bottomFrame&&(this.bottomFrame.css({zIndex:1}),this.bottomFrame.front.attr({fill:this.bottomFrame.color})),this.backFrame&&(this.backFrame.css({zIndex:0}),this.backFrame.front.attr({fill:this.backFrame.color}))}))});